<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link href="./css/base.css" rel="stylesheet">
  <link href="./css/account.css" rel="stylesheet">
  <link href="./css/transfer.css" rel="stylesheet">
</head>

<body>
  <div class="account">
    <div class="header w">
      <div class="searchBar fl"><img src="./images/account/donghua.gif"><input type="text"></div>
      <div class="loginInfo fr"><span>欢迎首页</span> | <span>退出登录</span></div>
    </div>
    <div class="w menu mt20">
      <ul>
        <li><a href="/account.html"><span><img src="./images/account/main_nav_accountmanage.png"></span>
            <p>账户管理</p>
          </a></li>
        <li class="active"><a href="transferToFirm.html"><span><img src="./images/account/main_nav_transfer.png"></span>
            <p>支付结算</p>
          </a></li>
        <li><a href="#"><span><img src="./images/account/main_nav_balance.png"></span>
            <p>集团结算</p>
          </a></li>
        <li><a href="#"><span><img src="./images/account/main_nav_financing.png"></span>
            <p>投资理财</p>
          </a></li>
        <li><a href="#"><span><img src="./images/account/main_nav_fundtreasure.png"></span>
            <p>普惠宝</p>
          </a></li>
        <li><a href="#"><span><img src="./images/account/main_nav_ebusiness.png"></span>
            <p>电子商务</p>
          </a></li>
        <li><a href="#"><span><img src="./images/account/main_nav_SCF.png"></span>
            <p>供应链金融</p>
          </a></li>
        <li><a href="#"><span><img src="./images/account/main_nav_international.png"></span>
            <p>国际业务</p>
          </a></li>
        <li><a href="#"><span><img src="./images/account/main_nav_draft.png"></span>
            <p>票据业务</p>
          </a></li>
        <li><a href="#"><span><img src="./images/account/main_nav_billpool.png"></span>
            <p>票据池</p>
          </a></li>
        <li><a href="#"><span><img src="./images/account/main_nav_cashpool.png"></span>
            <p>资金池</p>
          </a></li>
        <li><a href="#"><span><img src="./images/account/main_nav_warrantCenter.png"></span>
            <p>授权中心</p>
          </a></li>
        <li><a href="#"><span><img src="./images/account/main_nav_customer.png"></span>
            <p>服务中心</p>
          </a></li>
        <li><a href="#"><span><img src="./images/account/main_nav_bgChange.gif"></span>
            <p>背景更换</p>
          </a></li>
      </ul>
    </div>
    <div class="sub_munu">
      <ul>
        <li><a href="">账户查询</a></li>
        <li><a href="">账户查询</a></li>
        <li><a href="">账户查询</a></li>
        <li><a href="">账户查询</a></li>
        <li><a href="">账户查询</a></li>
        <li><a href="">账户查询</a></li>
      </ul>
    </div>
    <div class="wrap w">
      <div class="left_wrap fl">
        <ul>
          <li><a href="/transferToFirm.html">企业行内转账</a></li>
          <li><a href="/skiptran.html">企业跨行转账</a></li>
          <li class="active"><a href="#">企业向个人单笔转账</a></li>
          <li><a href="">爱心捐款</a></li>
          <li><a href="">跨行签约账户转账</a></li>
          <li><a href="">单笔转账交易查询与维护</a></li>
          <li><a href="">跨行签约账户限额查询</a></li>
          <li><a href="">行内个人签约账户转账</a></li>
          <li><a href="">行内个人签约账户资金归集设置</a></li>
          <li><a href="">行内个人资金归集交易结果查询</a></li>
          <li><a href="">中登上海专用交易</a></li>
          <li><a href="">PDS系统入金</a></li>
        </ul>
        <div class="tel"><img src="./images/account/kefu.jpg" alt=""></div>
      </div>
      <div class="right_wrap fr bg">
        <div class="crumbs">前位置： <a>支付结算</a> >> <a>单笔转账</a> >> 企业向个人单笔转账</div>
        <div class="transfer">
          <div class="transfreInfo">
            <ul>
              <li class="list01">转账类型</li>
              <li>
                <input type="radio" name="transferType" id="" checked>实时转账
                <input type="radio" name="transferType" id="">普通
                <input type="radio" name="transferType" id="">次日
              </li>
            </ul>
            <ul>
              <li class="list01">付款人信息</li>
              <li></li>
            </ul>
            <ul>
              <li class="list01">付款人账户<span class="required">*</span></li>
              <li>
                <select>
                  <option selected="">10241000000334682</option>
                </select>
                <span class="moreSelect" id="getBalance">查询可用余额</span>
              </li>
            </ul>
            <ul class="showBalance">
              <li class="list01">余额</li>
              <li id="balance"></li>
              <input type="hidden" id="availableMoney">
            </ul>
            <ul>
              <li class="list01">币种</li>
              <li>人民币</li>
            </ul>
            <ul>
              <li class="list01">转账金额<span class="required">*</span></li>
              <li><input id="transferAmount" type="text" placeholder="请输入金额"></li>
            </ul>
            <!-- <ul>
              <li class="list01">金额大写</li>
              <li>一百万</li>
            </ul> -->
            <ul>
              <li class="list01">期望日期<span class="required">*</span></li>
              <li><input id="expectedDate" type="text" onclick="SetDate(this,'yyyy-MM-dd hh:mm:ss')" autocomplete="off"
                  placeholder="请选择日期"><i class="calendar"><img src="./images/timg.jpg"></i></li>
            </ul>
            <ul>
              <li class="list01">用途<span class="required">*</span></li>
              <li>
                <select>
                  <option>薪水</option>
                  <option selected="">佣金</option>
                  <option>补贴</option>
                </select>
              </li>
            </ul>
            <ul>
              <li class="list01">收款人信息</li>
              <li></li>
            </ul>
            <ul>
              <li class="list01">收款银行</li>
              <li>
                <input type="radio" name="receivingBank" id="" checked>华夏银行
                <input type="radio" name="receivingBank" id="">其他银行
              </li>
            </ul>
            <ul>
              <li class="list01">收款人录入方式</li>
              <li>
                <input type="radio" name="1" id="" checked>输入收款人
                <input type="radio" name="1" id="">选择收款人
              </li>
            </ul>
            <ul>
              <li class="list01">收款账户<span class="required">*</span></li>
              <li>
                <input type="text" placeholder="请输入收款账户" id="accountNoTo">
              </li>
            </ul>
            <ul>
              <li class="list01">收款人名称<span class="required">*</span></li>
              <li>
                <!-- 根据上面的选择进行展示 -->
                <input type="text" placeholder="请输入收款人名称" id="accountNameTo">
                <!-- <select>
                  <option>张三</option>
                  <option selected="">李四</option>
                  <option>王五</option>
                </select> -->
                <input type="checkbox">将用途信息录入在常用用途列表中
              </li>
            </ul>
            <ul>
              <li class="list01">转账方式</li>
              <li>企业向个人转账</li>
            </ul>
          </div>
          <div class="subTransferData"><span class="confirm">确认</span><span>重置</span></div>
        </div>
        <!-- <div class="setSuccess trans">
          <span><img src="./images/account/small.jpg" alt="">提交成功！</span>
          <p>账户转账成功</p>
        </div> -->
        <div class="tip">
          <h3>客户提示：</h3>
          <ul>
            <li>企业付款账户（基本结算账户、一般结算账户）需至柜台开通后方可向个人账户转账；
            <li>当您使用“快速到账”和“同城票交”方式时，不能选择非工作日作为期望日期；
            <li>当收款人为华夏银行客户时，您最多可以在用途栏输入12个汉字或24个字母、数字、字符，若为其他银行客户时，您最多可以在用途栏输入30个汉字或60个字母、数字、字符；
            <li>输入收款人时，可以使用“列表显示”、“模糊查询”及“手工录入收款行”三种方式。收款人可添加至常汇户中，在“服务中心—收款人（常汇户）管理”中进行维护；
            <li>请您正确填写转账信息，因收款行、账号、户名等转账信息填写错误造成对方银行退款，手续费不退回；
            <li>交易确认页面回显的应收手续费指根据我行电子银行收费标准应收取的转账手续费，实收手续费指根据我行优惠政策实际收取的转账手续费，具体收费标准及优惠政策请参照我行网站首页“收费标准”栏目或咨询95577。
            <li>注：“实时转出”是按期望日期实时发起转账，“普通转出”是延迟三小时发起转账，“次日转出”是延迟到次日9点之后发起转账（交易具体发起时间约在次日9点至10点之间）
            <li>如本交易<font color=red>收款方</font>为<font color=red>非我行</font>开户的<font color=red>非居民个人</font>
              （开户证件为境外永久居留证、外国护照、港澳居民来往内地通行证、台湾居民来往大陆通行证等的个人），<font color=red>且</font>此交易涉及<font color=red>
                资本项目管理或货物贸易进出口核查</font>，请于业务办理<font color=red>当日</font>在<font color=red>开户网点办理</font>
              国际收支申报相关事宜，由此给您带来不便敬请谅解。</li>
          </ul>
        </div>
      </div>
    </div>
  </div>
  <div class="message-w none">
    <div class=" message_me">
      <p style="clear:both;" class="w-rule-title"><span class="fl">提示</span><span class="off_off fr">X</span></p>
      <p class="message_me-con">
        <img src="images/pay.png" alt="">
      </p>
      <div class="modal-footer">
        <a href="##" class="off_off btn btn-danger" data-dismiss="modal" onclick="submitMyForm()">确定</a>
      </div>
    </div>
  </div>
</body>

<script src="./js/jquery.js"></script>
<script src="./js/date.js"></script>
<script src="./js/mypop.js"></script>
<script src="./js/com.js"></script>
<script>
  $(function () {
    // $('.trans').hide()
    // $('.showBalance').hide()
    var pid = sessionStorage.getItem("pid")
    $.ajax({
      url: window.HOSTname + '/dbank/accountInfos/getAccountInfoByAccountNo',
      type: 'POST',
      contentType: "application/json",
      data: JSON.stringify({ "accountNo": pid }),
      dataType: "json",
      async: true,
      timeout: 1000,
      error: function (XMLHttpRequest, textStatus, errorThrown) {
        return false;
      },
      success: function (data) {
        if (data.status == "10001") {
          $("#balance").html(data.availableMoney)
          $("#availableMoney").val(data.availableMoney)
          // $('.showBalance').show()
        } else {
          alert(data.msg)
        }
      }
    });
    $(".transfreInfo").on("click", "#getBalance", function () {
      let data = { "accountNo": "6228481006388483999" }
      $.ajax({
        url: window.HOSTname + '/dbank/accountInfos/getAccountInfoByAccountNo',
        type: 'POST',
        contentType: "application/json",
        data: JSON.stringify(data),
        dataType: "json",
        async: true,
        timeout: 1000,
        error: function (XMLHttpRequest, textStatus, errorThrown) {
          return false;
        },
        success: function (data) {
          if (data.status == "10001") {
            $("#balance").html(data.availableMoney)
            $("#availableMoney").val(data.availableMoney)
            $('.showBalance').show()
          } else {
            alert(data.msg)
          }
        }
      });
    })
    const formData = [{ key: 'transferAmount', msg: '请输入转账金额' }, { key: 'accountNoTo', msg: '请输入收款账户' }, { key: 'accountNameTo', msg: '请输入收款人名称' }, { key: 'expectedDate', msg: '请选择期望日期' }]
    $(".subTransferData").on("click", ".confirm", function () {
      for (let i = 0; i < formData.length; i++) {
        if (!$("#" + formData[i].key).val()) {
          alert(formData[i].msg)
          return
        }
      }
      var pop01 = $(".message-w");
      $(pop01).myPop({
        closeBtn: "off_off "
      });
    })
    $(".calendar").on("click", function () {
      $(this).siblings("input").trigger("click");
    })
  })

  function submitMyForm() {
    let datas = {
      "payAccountNo": "10241000000334682",
      "accountNoTo": $("#accountNoTo").val(),
      "accountNameTo": $("#accountNameTo").val(),
      "currency": 1,
      "transferType": 1,
      "availableMoney": $("#availableMoney").val(),
      "expectedDate": $("#expectedDate").val(),
      "transPurpose": 1,
      "receivingBank": "华夏银行",
      "transferAmount": $("#transferAmount").val(),
      "transferMethod": 1,
      "remark": "企业向个人转账"
    }

    $.ajax({
      url: window.HOSTname + '/dbank/accountTransfers/transferToOtherAccount',
      type: 'POST',
      contentType: "application/json",
      data: JSON.stringify(datas),
      dataType: "json",
      async: true,
      timeout: 1000,
      error: function (XMLHttpRequest, textStatus, errorThrown) {
        opersignNo = "";
        return false;
      },
      success: function (data) {
        if (data.status == "10001") {
          window.location.href = "http://" + window.location.host + "/account.html";
          // $('.trans').show()
        } else {
          alert(data.msg)
        }
      }
    });
  }
</script>

</html>